(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[656],{7655:(e,t,l)=>{Promise.resolve().then(l.bind(l,505))},505:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>o});var a=l(3501),r=l(1673);let s=[{value:"jpeg",label:"JPEG",mimeType:"image/jpeg"},{value:"jpg",label:"JPG",mimeType:"image/jpeg"},{value:"png",label:"PNG",mimeType:"image/png"},{value:"webp",label:"WebP",mimeType:"image/webp"},{value:"bmp",label:"BMP",mimeType:"image/bmp"},{value:"gif",label:"GIF",mimeType:"image/gif"},{value:"tiff",label:"TIFF",mimeType:"image/tiff"}],o=()=>{let[e,t]=(0,r.useState)(null),[l,o]=(0,r.useState)(""),[i,n]=(0,r.useState)("jpeg"),[d,c]=(0,r.useState)(80),[m,u]=(0,r.useState)(!1),[x,h]=(0,r.useState)(null),[p,g]=(0,r.useState)(0),[b,f]=(0,r.useState)(0),v=(0,r.useRef)(null),j=(0,r.useCallback)(e=>{if(!e)return;if(!e.type.startsWith("image/")){alert("请上传图片文件");return}let l=new FileReader;l.onload=l=>{var a;let r=null===(a=l.target)||void 0===a?void 0:a.result;r&&(h(null),f(0),t(r),o(e.type.split("/")[1].toUpperCase()),g(e.size))},l.readAsDataURL(e)},[]),w=async()=>{if(e&&v.current){u(!0);try{var t;let e=document.createElement("canvas");e.width=v.current.naturalWidth,e.height=v.current.naturalHeight;let l=e.getContext("2d");if(!l)throw Error("无法创建 canvas context");("gif"===i||"tiff"===i)&&alert("注意：转换为 ".concat(i.toUpperCase()," 格式可能会失去动画效果")),l.drawImage(v.current,0,0);let a=(null===(t=s.find(e=>e.value===i))||void 0===t?void 0:t.mimeType)||"image/".concat(i),r=e.toDataURL(a,d/100);h(r);let o=Math.round(.75*r.length);f(o);let n=((p-o)/p*100).toFixed(1);console.log("原始大小: ".concat(y(p))),console.log("转换后大小: ".concat(y(o))),console.log("压缩率: ".concat(n,"%"))}catch(e){console.error("转换失败:",e),alert("图片转换失败，请重试")}finally{u(!1)}}},y=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,t)).toFixed(2))," ").concat(["Bytes","KB","MB","GB"][t])},N=(0,r.useCallback)(()=>{if(!x)return;let e=document.createElement("a");e.href=x,e.download="converted.".concat(i),document.body.appendChild(e),e.click(),document.body.removeChild(e)},[x,i]),k=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation();let t=e.dataTransfer.files[0];t&&j(t)},[j]),C=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),M=(0,r.useCallback)(()=>{t(null),h(null),g(0),f(0),o(""),u(!1),c(80)},[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-gradient-to-b from-[#0B1120] to-[#0B1120]/90 -z-10"}),(0,a.jsx)("main",{className:"min-h-screen w-full py-16 md:py-20",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 max-w-7xl",children:[(0,a.jsxs)("div",{className:"text-center mb-12 md:mb-16",children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 animate-fade-in",children:(0,a.jsx)("span",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 text-transparent bg-clip-text bg-[size:400%] animate-gradient",children:"图片格式转换工具"})}),(0,a.jsx)("p",{className:"text-gray-400 text-base md:text-lg max-w-2xl mx-auto animate-fade-in-up",children:"支持多种格式转换和质量压缩，快速获得最优图片。"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8 mb-12 md:mb-16",children:[(0,a.jsxs)("div",{className:"relative h-[600px] bg-[#1a2234]/50 backdrop-blur-sm rounded-2xl overflow-hidden border border-white/5 shadow-2xl transition-all group hover:border-blue-500/20",onDrop:k,onDragOver:C,children:[!e&&(0,a.jsx)("input",{type:"file",accept:"image/*",className:"hidden",id:"imageUpload",onChange:e=>{var t;let l=null===(t=e.target.files)||void 0===t?void 0:t[0];l&&j(l)}}),(0,a.jsx)("label",{htmlFor:e?void 0:"imageUpload",className:"absolute inset-0 flex flex-col items-center justify-center cursor-pointer",children:e?(0,a.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",children:[(0,a.jsx)("img",{ref:v,src:e,alt:"原始图片",className:"max-w-full max-h-full object-contain"}),p>0&&(0,a.jsxs)("div",{className:"absolute top-4 right-4 bg-black/50 backdrop-blur-md px-4 py-2 rounded-xl text-white text-sm font-medium border border-white/10",children:["格式: ",l," | 大小: ",y(p)]}),(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),M()},className:"absolute bottom-4 right-4 bg-red-500/10 hover:bg-red-500/20 text-red-500 px-4 py-2 rounded-xl backdrop-blur-sm border border-red-500/20 transition-all",children:"清除图片"})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("div",{className:"p-6 rounded-full bg-gradient-to-br from-gray-500/10 to-gray-500/5 border border-white/10",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-400 text-lg font-medium mb-1",children:"拖放或点击上传图片"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"支持 JPG、PNG、WebP 等格式"})]})]})})]}),(0,a.jsx)("div",{className:"h-[600px] bg-[#1a2234]/50 backdrop-blur-sm rounded-2xl overflow-hidden border border-white/5 shadow-2xl",children:x?(0,a.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",children:[(0,a.jsx)("img",{src:x,alt:"转换后的图片",className:"max-w-full max-h-full object-contain"}),b>0&&(0,a.jsxs)("div",{className:"absolute top-4 right-4 bg-black/50 backdrop-blur-md px-4 py-2 rounded-xl text-white text-sm font-medium border border-white/10",children:["大小: ",y(b)]})]}):(0,a.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"p-6 rounded-full bg-gradient-to-br from-gray-500/10 to-gray-500/5 border border-white/10 mb-4",children:(0,a.jsxs)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,a.jsx)("p",{className:"text-gray-400 text-lg font-medium",children:m?"处理中...":"转换后的图片预览"})]})})]}),(0,a.jsx)("div",{className:"py-4 md:py-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 md:gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto",children:[(0,a.jsxs)("div",{className:"bg-[#1a2234]/50 backdrop-blur-sm rounded-xl px-4 py-2.5 flex items-center gap-4 border border-white/5 w-full sm:w-auto",children:[(0,a.jsx)("span",{className:"text-gray-400 font-medium",children:"格式"}),(0,a.jsx)("select",{value:i,onChange:e=>n(e.target.value),className:"w-[140px] bg-[#242c3e] text-white rounded-lg px-3 py-2 outline-none border border-white/5 hover:border-blue-500/30 focus:border-blue-500/50 transition-colors appearance-none",children:s.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"bg-[#1a2234]/50 backdrop-blur-sm rounded-xl px-4 py-2.5 flex items-center gap-4 border border-white/5 w-full sm:w-auto",children:[(0,a.jsx)("span",{className:"text-gray-400 font-medium",children:"质量"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"range",min:"1",max:"100",value:d,onChange:e=>c(Number(e.target.value)),className:"w-32 accent-blue-500"}),(0,a.jsx)("div",{className:"w-[52px] bg-[#242c3e] px-2 py-1 rounded-lg border border-white/5",children:(0,a.jsxs)("span",{className:"text-white text-sm font-medium text-center block",children:[d,"%"]})})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto",children:[(0,a.jsx)("button",{className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-medium shadow-lg shadow-blue-500/20 hover:shadow-blue-500/30 hover:scale-105 active:scale-95 w-full sm:w-auto",disabled:!e||m,onClick:w,children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("span",{children:"处理中..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,a.jsx)("span",{children:"转换图片"})]})}),(0,a.jsx)("button",{className:"px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-medium shadow-lg shadow-red-500/20 hover:shadow-red-500/30 hover:scale-105 active:scale-95 w-full sm:w-auto",onClick:M,disabled:!e,children:"清除"}),x&&(0,a.jsxs)("button",{onClick:N,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all font-medium shadow-lg shadow-green-500/20 hover:shadow-green-500/30 hover:scale-105 active:scale-95 flex items-center justify-center gap-2 w-full sm:w-auto",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"下载"]})]})]})}),(0,a.jsx)("div",{className:"h-16 md:h-20"})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[822,649,358],()=>t(7655)),_N_E=e.O()}]);